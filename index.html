<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Подключение TON Wallet</title>
  <!-- Telegram Web App API -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- UMD-версия TON Connect SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@tonconnect/sdk/dist/tonconnect.umd.min.js"></script>
</head>
<body>
  <button id="connectBtn">Подключить TON Wallet</button>

  <script>
    // Инициализация Telegram Web App
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Проверка загрузки TON Connect SDK
    if (typeof window.TonConnect === 'undefined') {
      console.error("TonConnect SDK не загружен!");
      alert("Ошибка: TonConnect SDK не загружен");
    } else {
      // Инициализация TON Connect с URL манифеста (укажите ваш реальный домен)
      const tonConnect = new window.TonConnect({
        manifestUrl: 'https://matrixq35.github.io/oplata/manifest.json'
      });

      // Обработчик нажатия на кнопку
      document.getElementById('connectBtn').addEventListener('click', async () => {
        try {
          const wallet = await tonConnect.connect(); // Открывается окно выбора кошелька
          if (wallet && wallet.account) {
            alert(`Кошелёк подключен: ${wallet.account}`);
          } else {
            alert("Подключение отменено или не удалось");
          }
        } catch (error) {
          console.error("Ошибка подключения TON Wallet:", error);
          alert("Ошибка подключения. Проверьте консоль для деталей.");
        }
      });
    }
  </script>
</body>
</html>
